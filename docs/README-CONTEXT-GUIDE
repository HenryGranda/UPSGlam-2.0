context.md â€” UPSGLAM Project Context for AI Agents
ğŸ§© 1. Overview
UPSGLAM es una aplicaciÃ³n tipo Instagram acadÃ©mico, donde estudiantes pueden:
â—	Registrarse y autenticarse.

â—	Subir fotos con filtros aplicados mediante PyCUDA.

â—	Ver un feed de publicaciones.

â—	Dar likes y comentar.

â—	Editar su perfil y foto de usuario.

La arquitectura es microservicios, con backend en Spring WebFlux, un servicio de GPU en PyCUDA y almacenamiento en Firebase (Auth + Firestore + Storage).
 El frontend es una app mÃ³vil (Flutter u otra tecnologÃ­a).
Este documento sirve como contexto global para asistentes de IA, desarrolladores o herramientas automÃ¡ticas.
________________________________________
ğŸ§± 2. Arquitectura General
[ Mobile App ]
      â”‚
      â–¼
[ API Gateway ]  â† punto Ãºnico para todo el frontend
      â”‚
      â”œâ”€â”€â–º [ Auth-User Service ]   (registro, login, perfiles)
      â”‚
      â””â”€â”€â–º [ Post Service ]         (feed, posts, likes, comments, media)
                 â”‚
                 â””â”€â”€â–º [ PyCUDA Service ] (GPU filters)

â—	Firebase Auth â†’ autenticaciÃ³n de usuarios.

â—	Firestore â†’ posts, likes, comments, perfiles.

â—	Storage â†’ imÃ¡genes (avatares, temp previews, posts finales).

________________________________________
ğŸ” 3. AUTH & USER SERVICE (Endpoints)
POST /auth/register
Registra usuario en Firebase Auth y crea perfil en Firestore.
 Retorna: { user, token }.
POST /auth/login
Login con email/username/telÃ©fono.
 Retorna: { user, token }.
GET /auth/me
Devuelve info del usuario logueado.
PATCH /users/me
Actualiza username, fullName, bio.
PUT /users/me/avatar
Sube avatar al Storage â†’ avatars/{uid}.jpg.
GET /users/{userId}
Perfil pÃºblico de un usuario.
________________________________________
ğŸ“¸ 4. POSTS & FEED SERVICE (Endpoints)
GET /feed?page=x&size=y
Retorna un feed paginado con posts:
{
  id, userId, username, userPhotoUrl,
  imageUrl, filter, description,
  likesCount, commentsCount, likedByMe
}

________________________________________
POST /posts
Tienes dos estrategias:
ğŸ…°ï¸ Estrategia 1 â€“ Multipart (sin preview)
EnvÃ­a imagen + filter en multipart y se procesa de una.
ğŸ…±ï¸ Estrategia 2 â€“ Usando preview (recomendada)
1.	Se llama primero a /images/preview

2.	Luego:

POST /posts
{
  "tempImageId": "...",
  "filter": "...",
  "description": "..."
}

El backend mueve temp/ â†’ posts/ en Firebase Storage.
________________________________________
GET /posts/{postId}
Obtiene un post completo.
DELETE /posts/{postId}
Elimina un post.
________________________________________
â¤ï¸ 5. LIKES
POST /posts/{postId}/likes â†’ like
DELETE /posts/{postId}/likes â†’ unlike
Firestore: posts/{postId}/likes/{userId}.
 Devuelve:
{ postId, likesCount, likedByMe }

________________________________________
ğŸ’¬ 6. COMMENTS
GET /posts/{postId}/comments
Lista comentarios paginados.
POST /posts/{postId}/comments
Crea un comentario:
Firestore: posts/{postId}/comments/{commentId}.
DELETE /posts/{postId}/comments/{commentId}
Opcional, borrar comentario propio.
________________________________________
ğŸ¨ 7. IMAGES & PyCUDA PREVIEW
POST /images/preview
Se usa para simular la experiencia Instagram:
1.	App toma foto.

2.	EnvÃ­a imagen + filtro elegido.

3.	Backend llama al servicio PyCUDA.

4.	Se genera imagen filtrada y se sube a temp/{tempId}.jpg.

Respuesta:
{
  "tempImageId": "tmp-xyz",
  "imageUrl": "https://.../temp/tmp-xyz.jpg"
}

Luego eso se usa para crear el post definitivo.
________________________________________
âš™ï¸ 8. PYCUDA SERVICE (interno)
POST /filters/{filterName}
Recibe bytes JPEG â†’ procesa en GPU â†’ devuelve bytes JPEG filtrados.
Filtros disponibles:
â—	gaussian

â—	sharpen

â—	edge_detect

â—	ups_logo

â—	Otros kernels posibles.

Estructura del servicio PyCUDA:
/api/filters_controller.py
/core/filter_service.py
/core/cuda_context.py
/core/kernels/*.cu
/utils/image_io.py

________________________________________
ğŸ—‚ 9. FIRESTORE DATA MODEL
Collection: users/{uid}
{
  email, username, fullName,
  photoUrl, bio
}

Collection: posts/{postId}
{
  userId, username, userPhotoUrl,
  imageUrl, filter, description,
  createdAt,
  likesCount, commentsCount
}

Subcollection: posts/{postId}/likes/{userId}
{ userId, createdAt }

Subcollection: posts/{postId}/comments/{commentId}
{
  postId, userId, username,
  userPhotoUrl,
  text, createdAt
}

________________________________________
ğŸ¨ 10. FRONTEND FLOW SUMMARY
App start
1.	Splash â†’ revisa token local.

2.	Si existe â†’ GET /auth/me.

3.	Si vÃ¡lido â†’ Feed. Si no â†’ Login.

Login / Register â†’ recibe token â†’ guarda â†’ Feed.
Home / Feed
â—	GET /feed

â—	like/unlike

â—	abrir comentarios

â—	ir a perfil pÃºblico

Crear post (Instagram style)
1.	Abrir cÃ¡mara

2.	Elegir filtro

3.	Tomar foto

4.	/images/preview

5.	Ver imagen filtrada

6.	POST /posts con tempImageId

Perfil
â—	Editar datos â†’ PATCH /users/me

â—	Cambiar avatar â†’ PUT /users/me/avatar

â—	Ver perfil pÃºblico â†’ GET /users/{uid}

________________________________________
ğŸ§ª 11. MOCK API (para frontend dev sin backend)
Se provee una guÃ­a con:
â—	Respuestas fake para todos los endpoints reales.

â—	Modo de trabajo USE_MOCK_API = true.

â—	Usuarios y posts dummy.

â—	SimulaciÃ³n de likes y comentarios.

Sirve para que el frontend avance sin backend activo.
________________________________________
ğŸ“ 12. Documentos oficiales del proyecto
â—	Backend Guide:
 https://docs.google.com/document/d/12PI-5XiBxN7zwE-i1jGzYCfvBcPqL0p5PCEQSo1fgoM/edit?usp=sharing

â—	Frontend Guide:
 https://docs.google.com/document/d/1GSNjo0X5tGQvUtgoynjtXQzBTz6BY3P2EjNMW3VeUp0/edit?usp=sharing

â—	Firestore Guide:
 https://docs.google.com/document/d/1EX8HW8SYtyETaM7l6GyuDSKiRtBqsCg9s7W6kRc9eoY/edit?usp=sharing

â—	PyCUDA Guide:
 https://docs.google.com/document/d/1aW2nYDAHIm-XAb6BQqsebeN1xHqokLTSDJe3mZKcWOw/edit?usp=sharing

â—	Mock Guide:
 https://docs.google.com/document/d/1xpFnRWvidqHARWYLQu6pAhZWAhYeisjklV62n8EFYYU/edit?usp=sharing

________________________________________
ğŸ¯ 13. Purpose of this Document
Este context.md permite que:
â—	Un agente de IA entienda rÃ¡pidamente la arquitectura completa.

â—	Un nuevo desarrollador entre al proyecto sin confusiÃ³n.

â—	Cualquier herramienta automÃ¡tica (AI dev tools) tenga el contexto unificado.


