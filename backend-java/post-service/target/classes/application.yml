server:
  port: 8081

spring:
  application:
    name: post-service
  
  # R2DBC Configuration for Supabase Postgres
  r2dbc:
    url: r2dbc:postgresql://${SUPABASE_DB_HOST:aws-0-us-east-1.pooler.supabase.com}:${SUPABASE_DB_PORT:6543}/${SUPABASE_DB_NAME:postgres}
    username: ${SUPABASE_DB_USER:postgres}
    password: ${SUPABASE_DB_PASSWORD:your-password}
    pool:
      initial-size: 10
      max-size: 20
      max-idle-time: 30m

  # WebFlux Configuration
  webflux:
    base-path: /api
  
  # File upload configuration
  codec:
    max-in-memory-size: 10MB

# Supabase Configuration
supabase:
  url: ${SUPABASE_URL:https://your-project.supabase.co}
  key: ${SUPABASE_KEY:your-anon-key}
  service-role-key: ${SUPABASE_SERVICE_ROLE_KEY:your-service-role-key}
  storage:
    bucket: upsglam
    folders:
      temp: temp
      posts: posts
      avatars: avatars

# Firebase Configuration (solo para Auth)
firebase:
  credentials:
    path: ${FIREBASE_CREDENTIALS_PATH:classpath:firebase-credentials.json}
  project-id: ${FIREBASE_PROJECT_ID:your-project-id}

# PyCUDA Service Configuration
pycuda:
  service:
    url: ${PYCUDA_SERVICE_URL:http://pycuda-service:5000}
    timeout: 30000 # 30 seconds

# Logging
logging:
  level:
    root: INFO
    ec.ups.upsglam: DEBUG
    org.springframework.web: DEBUG
    io.r2dbc: DEBUG

# Actuator
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
  endpoint:
    health:
      show-details: always
